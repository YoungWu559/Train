<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-34711826-1', 'auto');
  ga('send', 'pageview');
</script>
<script src="YJS.js?0.8584552591240585" type="model" defer></script>
<script src="CS540.js?0.8115596005401492" type="model" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
<script src="https://unpkg.com/mathjs@6.1.0/dist/math.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<title>Young Wu's Homepage</title>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="style540.css" type="text/css">
</head>
<body>
<div id="masthead">
<h1 id="siteName">CS540 Summer 2020 Epic Section</h1>
</div> 
<div id="content">
<script type="module"> import {p3s20e} from "./CS540.js"; p3s20e() </script> <br>
<a href="CS540P2S20E.htm">Previous: P2</a>, <a href="CS540P4S20E.htm">Next: P4</a> <br>
<br>
Back to week 5 page: <a href="CS540W5S20E.htm">Link</a> <br>
Back to week 6 page: <a href="CS540W6S20E.htm">Link</a> <br>
<br>
Official Due Date: July 5 <br>
<br>
<h2>Programming Problem Instruction</h2>
&bull; Enter your ID here: <input type="text" id="id" value="" size="20"> and click <button id="button_0">Confirm</button> <span hidden id="questions">1,2,3,4,5,6,7,8,9,10</span> <br>
&bull; The same ID should generate the same set of parameters. Your answers are not saved when you close the browser. You could either copy and paste your console output into the text boxes or print your output to text files (.txt) and load them using the button above the text boxes. <br>
&bull; Please report any bugs on Piazza. <br>
<br>
<h2><span id="id_warning"><font color="red"> Warning: please enter your ID before you start! </font></span></h2>
<br>
&bull; (Introduction) In this programming homework, you will build and simulate a simple Markov chain model based on a movie script. You will use it to generate new sentences that hopefully contain sensible words maybe even phrases. In addition, you will build a Naive Bayes classifier to distinguish sentences from the script and sentences from another fake script. Due to the English vocabulary size, you will use characters as features instead of words. In practice, you could replace the 26 letters by (more than 170,000) English words when training these models. <br>
<br>
&bull; (Part 1) Download the script of one of the following movies: "<span id="movie1_0"></span>", "<span id="movie2_0"></span>", "<span id="movie3_0"></span>" from IMSDb: <a href="https://www.imsdb.com/" target="_blank">Link</a>. If you have another movie you really like, you can use that script instead. Go to the website, use "Search IMSDb" on the left to search for this movie, click on the link: "Read ... Script", and copy and paste the script into a text file. <br>
<br>
&bull; (Part 1) Make everything lower case, then remove all characters except for letters and spaces. Replace consecutive spaces by one single space and make sure that there are no consecutive spaces. <br>
<br>
&bull; (Part 1) Construct the bigram character (letters + space) transition probability table. Put "space" first then "a", "b", "c", ..., "z". It should be a 27 by 27 matrix. <br>
<br>
&bull; (Part 1) Construct the trigram transition probability table. It could be a 27 by 27 by 27 array or a 729 by 27 matrix. You do not have to submit this table. <br>
<br>
&bull; (Part 1) Generate 26 sentences consists of 1000 characters each using the trigram model starting from "a", "b", "c", ..., "z". You should use the bigram model to generate the second character and switch to the bigram model when the current two-character sequence never appeared in the script. For example, when you see "xz", instead of using the trigram model for the probabilities of Pr{? | xz}, switch to use the bigram model for the probabilities of Pr{? | z}. Find and share some interesting sentences. <br>
<br>
&bull; (Part 2) The following is my randomly generated script written according to an non-English language model. <br>
<textarea id="script_0" rows="2" cols="20"></textarea> <br>
You can either use the <button id="button_1">Download</button> button to download a text file, or copy and paste from the text box to a text file. Please do not change the content of the text box. <br>
<br>
&bull; (Part 2) Train a Naive Bayes classifier based on the characters. You should use an uniform prior, i.e. Pr{Document = your script} = Pr{Document = my script} = 0.5, compute the likelihood Pr{Letter | Document} based on your script and my script, and compute the posterior probabilities Pr{Document | Letter}, and test your classifier on the 26 random sentences you generated. <br>
<br>
<h2>Submission</h2>
<h2>Question 1 [<span id="total_1">1</span> points]</h2>
&bull; Please enter the name of the movie script you used. <br>
&bull; Answer: <input type="text" id="answer_1" value="" size="20"> <br>
<br>
<h2>Question 2 [<span id="total_2">5</span> points]</h2>
&bull; (unigram) Input the unigram probabilities (27 numbers, comma-separated, rounded to 4 decimal places, "space" first, then "a", "b", ...). <br>
<textarea id="unigram" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_2"></span> <br>
<br>
<h2>Question 3 [<span id="total_3">5</span> points]</h2>
&bull; (bigram) Input the bigram transition probabilities without Laplace smoothing (27 lines, each line containing 27 numbers, comma-separated, rounded to 4 decimal places, "space" first, then "a", "b", ...). <br>
<textarea id="bigram" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_3"></span> <br>
<br>
<h2>Question 4 [<span id="total_4">5</span> points]</h2>
&bull; (bigram_smooth) Input the bigram transition probabilities with Laplace smoothing (27 lines, each line containing 27 numbers, comma-separated, rounded to 4 decimal places, "space" first, then "a", "b", ...). <br>
&bull; Hint: to make sure auto-grading marks your answer correct, please make sure all probabilities are strictly larger than 0 after rounded to 4 decimal places, for example, 0.00002 should be rounded up to 0.0001 instead of 0.0. <br>
<textarea id="bigram_smooth" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_4"></span> <br>
<br>
<h2>Question 5 [<span id="total_5">10</span> points]</h2>
&bull; (sentences) Input the 26 sentences generated by the trigram and bigram models (Laplace smoothed). (26 lines, each line containing 1000 characters, line 1 starts with "a", line 2 starts with "b" ...). <br>
<textarea id="sentences" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_5"></span> <br>
<br>
<h2>Question 6 [<span id="total_6">2</span> points]</h2>
&bull; Find one interesting sentence that at least contains English words. <br>
&bull; Answer: <input type="text" id="answer_6" value="" size="20"> <br>
<br>
<h2>Question 7 [<span id="total_7">5</span> points]</h2>
&bull; (likelihood) Enter likelihood probabilities of the Naive Bayes estimator for my script. (27 numbers, comma separated, rounded to 4 decimal places, Pr{"space" | D = my script}, Pr{"a" | D = my script}, Pr{"b" | D = my script}, ...). The likelihood probabilities for your script should be the same as your answer to Question 2. <br>
<textarea id="likelihood" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_7"></span> <br>
<br>
<h2>Question 8 [<span id="total_8">5</span> points]</h2>
&bull; (posterior) Enter posterior probabilities of the Naive Bayes estimator for my script. (27 numbers, comma separated, rounded to 4 decimal places, Pr{D = my script | "space}, Pr{D = my script | "a"}, Pr{D = my script | "b"}, ...). <br>
<textarea id="posterior" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_8"></span> <br>
<br>
<h2>Question 9 [<span id="total_9">5</span> points]</h2>
&bull; (predictions) Use the Naive Bayes model to predict which document the 26 sentences your generated in Question 5. Remember to compare the sum of log probabilities instead of the direct product of probabilities. (26 numbers, either 0 or 1, 0 is the label for your script, 1 is the label for mine) <br>
&bull; Hint: your prediction is supposed to be all 0s, but if there are few 1s, it is okay, but make sure you generated the sentences in Question 5 correctly according to the instruction (especially switching to bigram from trigram when necessary). <br>
<textarea id="predictions" rows="2" cols="20"></textarea> <br>
<span hidden id="answer_9"></span> <br>
<br>
<h2>Question 10 [<span id="total_10">1</span> points]</h2>
&bull; Please enter any comments and suggestions including possible mistakes and bugs with the questions and the auto-grading, and materials relevant to solving the question that you think are not covered well during the lectures. If you have no comments, please enter "None": do not leave it blank. <br>
&bull; Answer: <textarea id="answer_10" rows="2" cols="20"></textarea>. <br>
<br>
<h2>Grade</h2>
<button id="button_2">Grade</button> <br>
&nbsp;***** ***** ***** ***** *****&nbsp; <br>
<span id="comment"></span> <br>
&nbsp;***** ***** ***** ***** *****&nbsp; <br>
&bull; Warning: grading may take around 10 to 20 seconds. Please be patient and do not click "Grade" multiple times. <br>
<br>
&bull; Please copy and paste the text between the *****s (not including the *****s) and submit it on Canvas, P3. <br>
&bull; Please submit your code and outputs on Canvas, P3S. <br>
&bull; You could also save your output as a single text file using the button <button id="button_3">Download</button> and submit this to P3S (with your code). <br>
&bull; Warning: the load button does not function properly for all questions, please recheck everything after you load. You could load your answers using the button <button id="button_4">Load</button> from the text field: <br>
<input type="file", id="loading_input", accept='text/plain'><br><textarea id="loading"></textarea> <br>
&bull; Saving and loading may take around 10 to 20 seconds. Please be patient and do not click the buttons multiple times. <br>
<br>
<h2>Hints and Solutions (frequently updated)</h2>
&bull; The tolerance of error for Question 5 has decreased: as long as the unigram and bigram probabilities inferred from sentences you generated is within plus or minus 0.1 of the probabilities you enter in Question 2 and 4, you will receive full points. <br>
&bull; The posterior probabilities are defined as: Pr{D|a} = Pr{a|D} Pr{D} / (Pr{a|D} Pr{D} + Pr{a|not D} Pr{not D}), where Pr{D} = Pr{not D} = 0.5 and Pr{a|D} is the unigram probability of a for your script and Pr{a|not D} is the unigram probability of a for my script. <br>
&bull; For both all (smoothed or not smoothed) probabilities make sure each line add up to 1.0000. <br>
&bull; A sample solution in Java and Python is posted below. <br>
Important notes:&nbsp; <br>
(1) Smoothing is not done. You have to implement it. <br>
(2) Classification is not done, you should implement it using the hint. Basically, label 0 iff log Pr{D = your script | first letter} + log Pr{D = your script | second letter} + log Pr{D = your script | third letter} + ... > log Pr{D = my script | first letter} + log Pr{D = my script | second letter} + log Pr{D = my script | third letter} + ... Each of these posterior probabilities should be from your answer in Question 8. [Explanation: Unigram model implies the probability of observing a sentence is the product of the probability of observing each character, but taking the product between small numbers will cause numerical problems (i.e. you cannot compare two numbers that are too close to 0 because they are both stored on a computer as 0). Taking the log will preserve the inequality, and log of a product is equal to the sum of the logs, that is why you get the above expression.] <br>
(3) You are allowed to copy and use parts of the TA's solution without attribution. You are allowed to use code from other people and from the Internet, but you must state in the comments clearly where they come from! <br>
<br>
Python code by Hugh Liu: <a href="https://git.doit.wisc.edu/YLIU785/ta540_2020summer/-/tree/master/P3_student_python" target="_blank">Link</a> <br>
Java code by Ainur Ainabekova: <a href="https://git.doit.wisc.edu/AINABEKOVA/cs-540_summer2020/-/tree/master/P3" target="_blank">Link</a>. <br>
<br>
<script type="module"> 
import {enter_button, gen_questions, download_file, grade, download_blanks, load_blanks_page, read_file} from "./YJS.js";
document.getElementById("button_0").onclick = () => gen_questions();
document.getElementById("button_1").onclick = () => download_file("@script_0", "script");
document.getElementById("button_2").onclick = () => grade();
document.getElementById("button_3").onclick = () => download_blanks("@id;@answer_1;@unigram;@bigram;@bigram_smooth;@sentences;@answer_6;@likelihood;@posterior;@predictions;@answer_10", "P3");
document.getElementById("button_4").onclick = () => load_blanks_page("@loading");
document.getElementById("loading_input").onchange = () => read_file(event, "loading");
</script><br>
<br>
<br>
<br>
<br>
<font color="grey" size = 2> Last Updated: May 27, 2021 at 10:24 PM</font><br>
<br>
</div>
<div id="primarynavarea">
<ul id="primarynav">
<li><a href="CS540S20E.htm"><span class="secondcolor"><strong>Home</strong></span></a></li>
<ul id="primarynavsub">
<li><a href="CS540W1S20E.htm">Week 1 </a></li>
<li><a href="CS540W2S20E.htm">Week 2 </a></li>
<li><a href="CS540W3S20E.htm">Week 3 </a></li>
<li><a href="CS540W4S20E.htm">Week 4 </a></li>
<li><a href="CS540W5S20E.htm">Week 5 </a></li>
<li><a href="CS540W6S20E.htm">Week 6 </a></li>
<li><a href="CS540W7S20E.htm">Week 7 </a></li>
<li><a href="CS540W9S20E.htm">Week 9 </a></li>
<li><a href="CS540W10S20E.htm">Week 10 </a></li>
<li><a href="CS540W11S20E.htm">Week 11 </a></li>
<li><a href="CS540W12S20E.htm">Week 12 </a></li>
<li><a href="CS540W13S20E.htm">Week 13 </a></li>
</ul>
<li><a href="CS540W8S20E.htm">Midterm </a></li>
<li><a href="CS540W14S20E.htm">Final </a></li>
</ul>
</div>
<div id="siteInfo">&nbsp;<img style="width: 191px; height: 65px;" alt="" src="image003.png">
</div>
</body>
</html>
